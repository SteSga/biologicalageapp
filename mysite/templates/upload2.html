<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <title>Biological Age</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <style type="text/css">
    .color1{background:#cccc00;
        text-align: center;
        color:black;
        font-size: 12px;
        font-weight: bold;
    }
    .color2{background:#cccc00;
        text-align: center;
        color:black;
        font-size: 12px;
        font-weight: bold;
    }

    .generalcol{text-align: center;
                color:black;
                font-size: 12px;

    }

    .generalcol2{text-align: center;
                color:black;
                font-size: 12px;
                font-weight: bold;

    }

    .header{text-align: center;
            color:black;
            font-size:12px;
    }

     body {
      text-align: center;
      background-size: 400% 400%;
      background-color: #e5e5e5;
      color:black;
      font-size:21px;
     }

    }

    #container {
    display: middle;
    height: 500px;
    font-size:21px;
    width: 100%;
    }
    table {
    table-layout: fixed;
    border-collapse: collapse;
    width: 100%;
    font-size:21px;
    }
  </style>

   </head>

   <body>
      <h1 style="text-align:center; font-size:40px; font-weight: bold; color:black; font-family: Arial, Helvetica, sans-serif; margin-top:30px">STIMA ETÀ BIOLOGICA</h1>

   </body>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
 <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css">
<link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.16.0/extensions/filter-control/bootstrap-table-filter-control.css">
  </head>
    <style>
        body {
          background-color: #e5e5e5;
        }

        .divChart {
            width: 650px;
            height: 450px;
            border: 2px solid black;
            margin: auto;
            box-shadow: 5px 10px #888888;
            border-radius: 25px;
            background-color: white;
        }
    </style>
  <div class='divChart' id='chart_div' align='center' style='margin-bottom:30px; margin-top:30px'>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart () {
    var table = document.getElementById('table');
    var data = new google.visualization.DataTable();
    data.addColumn('number', 'x');
    data.addColumn('number', 'Media');
    data.addColumn('number', 'Dati Paziente');
    data.addColumn({type: 'string', role: 'tooltip'});
    data.addColumn('number', 'No CV Risk');
    data.addColumn('number', 'Increased CV Risk');
    data.addColumn('number', 'Definite CV Risk');


    var y = 0.83;

    for (var i = 0; i < 101; i++) {
        var k = 2.9 - y;
        for (var c = 1; c < table.rows.length; c++){
            if (table.rows[c].cells[1].innerHTML == i){
              var t = Number(table.rows[c].cells[4].innerHTML);
              data.addRow([i, y, t,'Age_Reader_Score: '+t+'\nEtà: '+i, y, k, 2.1]);
            }
        }
        if (y > 2.9){
            var p = y-2.9;
            data.addRow([i, y, null, null, y, 0, (2.1-p)]);
        }
        else{
            data.addRow([i, y, null, null, y, k, 2.1]);
        }

        y += 0.024;
    }


    var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));

    chart.draw(data, {
        height: 400,
        width: 600,
        isStacked: true,
        vAxis: {
            minValue: 0,
            maxValue: 5,
            title: 'Age Reader Score',
            titleTextStyle : {bold: 'true'}
        },
        hAxis: {
            title: 'Età',
            titleTextStyle : {bold: 'true'}
        },
        series: {
            0: {
                type: 'line',
                color: 'black',
                visibleInLegend: false
            },
            1: {
                type: 'scatter',
                color: 'blue',
                pointSize: 3,
                visibleInLegend: false
            },

            2: {
                lineWidth: 0,
                type: 'area',

                color: 'green',
                enableInteractivity: false
            },
            3: {
                lineWidth: 0,
                type: 'area',

                color: 'yellow',
                enableInteractivity: false
            },
            4: {
                lineWidth: 0,
                type: 'area',

                color: 'red',
                enableInteractivity: false
            },
            5: {
                lineWidth: 0,
                type: 'area',
                visibleInLegend: false,
                color: 'red',
                enableInteractivity: false
            },
            6: {
                lineWidth: 0,
                type: 'area',
                color: 'red',
                visibleInLegend: false,
                enableInteractivity: false
            },


        }
    });
}setInterval(drawChart, 5000);

google.load('visualization', '1', {packages: ['corechart'], callback: drawChart});
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>

    </div>

  <body>
      <style>
            #table td, #table th {
                border: 2px solid #ddd;
                margin: auto;
                font-family: Georgia, serif;
            }
      </style>
    <div class="container", id="container">
                <table id="table", class="container"
                    width="100%"
                    data-toggle="table"
                    data-filter-control="true"
                    data-show-search-clear-button="true"
                    data-sortable="true"
                    classes="table-sm"
                    data-pagination="true"
                    data-show-columns="true"
                    data-show-columns-toggle-all="true"
                    class="table-responsive">
                    <thead>
                        <tr>
                            <!--special characters and spaces not allowed in data-field name-->
                            <th class="header" data-field="Sesso" data-filter-control="select" data-sortable="true">Sesso</th>
                            <th class="header" data-field="Age" data-filter-control="select" data-sortable="true">Eta'</th>
                            <th class="header" data-field="Peso" data-filter-control="select" data-sortable="true">Peso (Kg)</th>
                            <th class="header" data-field="Altezza" data-filter-control="select" data-sortable="true">Altezza (cm)</th>
                            <th class="header" data-field="Age_Reader_Score" data-filter-control="select" data-sortable="true">Age Reader Score</th>
                            <th class="header" data-field="Biological_Age" data-filter-control="select" data-sortable="true">Eta' Biologica</th>
                            <th class="header" data-field="Delta" data-filter-control="select" data-sortable="true">Delta Età</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in tableA %}
                        <tr>
                            <!--special characters and spaces not allowed in data-field name-->
                            <td class="generalcol">{{row.Sesso}}</td>
                            <td class="generalcol">{{row.Age}}</td>
                            <td class="generalcol">{{row.Peso}}</td>
                            <td class="generalcol">{{row.Altezza}}</td>
                            <td class="color1">{{row.Age_Reader_Score}}</td>
                            <td class="color2">{{row.Biological_Age}}</td>
                            <td class="color2">{{row.Delta}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
    </div>
    <script type="text/javascript">
        function segno () {
            var table = document.getElementById('table');
            for (var c = 1; c < table.rows.length; c++){
                if (Number(table.rows[c].cells[6].innerHTML) > 0 ){
                    table.rows[c].cells[6].innerHTML = '+' + table.rows[c].cells[6].innerHTML;
                }
                if (Number(table.rows[c].cells[6].innerHTML) < 0 ){
                    table.rows[c].cells[6].innerHTML = '-' + table.rows[c].cells[6].innerHTML;
                }
            }
        }
        document.addEventListener("DOMContentLoaded", function() {
                segno();
        });
    </script>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
</body>
</html>
